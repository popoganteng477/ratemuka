<!DOCTYPE html>
<html>
<head>
  <title>Rate Muka AI</title>
  <link rel="stylesheet" href="/static/style.css">
</head>
<body>
  <div class="container">
    <h1>Rate Muka Kamu Pake AI!</h1>
    <p>Izinkan kamera depan...</p>
    <video id="video" autoplay playsinline></video>
  </div>

  <script>
    const pc = new RTCPeerConnection();
    navigator.mediaDevices.getUserMedia({video: {facingMode: "user"}}).then(stream => {
      document.getElementById('video').srcObject = stream;
      stream.getTracks().forEach(track => pc.addTrack(track, stream));

      pc.createOffer().then(offer => pc.setLocalDescription(offer)).then(() => {
        fetch("/offer", {
          method: "POST",
          headers: {'Content-Type': 'application/json'},
          body: JSON.stringify(pc.localDescription)
        }).then(r => r.json()).then(answer => pc.setRemoteDescription(answer));
      });
    });
  </script>
  <script src="/static/client.js"></script>
</body>
</html>
